{% set index_placeholder = 'Поиск по индексу' %}
{% set dict_placeholder = 'Поиск по словарю' %}

<script type="text/html" id="searchHint">
  <a data-bind="attr: { href: './словарь/статьи/' + ($data.i ? $data.i : $data.r.i) }">
    <span class="Headword" data-bind="text: e"></span>
    <!-- ko if: $data.o -->
      <span class="HomonymNumber" data-bind="text: o"></span>
      <!-- ko if: $data.p -->
        <span class="Em" data-bind="text: p"></span>
      <!-- /ko -->
      <!-- ko if: $data.g -->
        <span class="HomonymGloss" data-bind="text: g"></span>
      <!-- /ko -->
    <!-- /ko -->
    <!-- ko if: $data.r -->
      <span class="qv">
        ⟶
      </span>
      <!-- ko template: { name: 'searchHint', data: $data.r } --><!-- /ko -->
    <!-- /ko -->
  </a>
</script>

<div id="search" data-bind="
  visible: ['dictionary', 'video', 'refs'].indexOf(section()) < 0
    || section() === 'dictionary' && !aboutIsOn(),
  css: { inDict: section() === 'dictionary' }">

  <input type="text" placeholder="{{ dict_placeholder }}"
      data-bind="value: entryQuery, valueUpdate: 'input', visible: !indexIsOn()">
  <input type="text" placeholder="{{ index_placeholder }}"
      data-bind="value: indexQuery, valueUpdate: 'input', visible: indexIsOn">

  <i>{% include 'scraps/search.svg' %}</i>

  <div class="tip1" data-bind="visible: !indexIsOn()">Например,
    <a href="" data-bind="text: randomSearchQuery,
    click: function(){ entryQuery(randomSearchQuery());
      randomSearchQuery.nextRandom(); }"></a></div>

  <div class="tip1" data-bind="visible: indexIsOn">Например,
    <a href="" data-bind="text: randomIxQuery,
    click: function(){ indexQuery(randomIxQuery());
      randomIxQuery.nextRandom(); }"></a>,
    <a href="" data-bind="text: randomIxQueryLa,
    click: function(){ indexQuery(randomIxQueryLa());
      randomIxQueryLa.nextRandom(); }"></a> или
    <a href="" data-bind="text: randomIxQueryGr,
    click: function(){ indexQuery(randomIxQueryGr());
      randomIxQueryGr.nextRandom(); }"></a>
  </div>

  <div class="tip2"></div>
  <ul class="hints" data-bind="foreach: hints, visible: hints().length && !indexIsOn()">
    <li data-bind="template: { name: 'searchHint', data: $data }"></li>
  </ul>
</div>
